!function(){angular.module("candidatePortal.application").directive("quickFileUpload",["$parse","candidatePortal.services.commonService",function(e,r){return{restrict:"A",scope:{fileArrayObj:"=quickFileUpload",url:"="},link:function(e,o,l){console.log(e.fileArrayObj);var a=e.url;o.bind("change",function(){e.$apply(function(){var l=o[0].files;if(console.log(l.length),0!=l.length){null!=e.fileArrayObj&&""!=e.fileArrayObj||(e.fileArrayObj=[]);for(var s=e.fileArrayObj.length,i=0;i<l.length;i++){var t=l[i].name.split("."),p=t[t.length-1];if("pdf"==p||"doc"==p||"docx"==p){var c=s+i;e.fileArrayObj.push({file:l[i],type:p,progress:"0"});var f=new FormData;f.append("file",l[i]),n(a,f,c)}else e.fileArrayObj=void 0,r.showInfoMsg("Unsupported format. Only pdf, doc & docx are allowed")}console.log(e.fileArrayObj)}})});var n=function(r,o,l){var a=new Array;a[l]=new XMLHttpRequest,a[l].upload.addEventListener("progress",function(r){console.log("progress"),console.log(r),e.fileArrayObj[l].progress=Math.round(100*r.loaded/r.total),console.log(e.fileArrayObj),e.$apply()},!1),a[l].addEventListener("load",function(r){200==r.target.status?(console.log("on complete"+l),console.log(r),e.fileArrayObj[l].progress="Success",e.fileArrayObj[l].response=JSON.parse(r.target.response),e.$apply(),console.log(e.fileArrayObj)):(console.log("Request failed."+l),console.log(r),e.fileArrayObj[l].progress="Failed",e.fileArrayObj[l].response=JSON.parse(r.target.response),e.$apply())},!1),a[l].addEventListener("error",function(r){console.log("on failure"+l),console.log(r),e.fileArrayObj[l].progress="Failed",e.fileArrayObj[l].response=JSON.parse(r.target.response),console.log(e.fileArrayObj),e.$apply()},!1),a[l].open("POST",r,!0),a[l].withCredentials=!0,a[l].send(o)}}}}])}();