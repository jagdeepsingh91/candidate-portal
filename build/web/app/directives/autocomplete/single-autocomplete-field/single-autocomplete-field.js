!function(){angular.module("candidatePortal.application").directive("singleAutocomplete",["candidatePortal.services.apiMethods","$filter",function(e,n){return{restrict:"EA",replace:!0,scope:{suggestionsArr:"=",ngModel:"=",apiUrl:"="},templateUrl:"app/directives/autocomplete/single-autocomplete-field/single-autocomplete-tpl.html",link:function(o,t,l){t.removeAttr("class"),o.objectProperty=l.objectProperty;var s=function(){null!=o.objectProperty&&""!=o.objectProperty?(null!=o.ngModel&&""!=o.ngModel||(o.ngModel={}),o.inputValue=o.ngModel[o.objectProperty]):o.inputValue=o.ngModel},r=function(){var n=o.apiUrl;e.apiGETReq(n,null,!1).then(function(e){o.suggestionsArr=e.data.response},function(e){console.log("Unable to fetch list")})};null!=o.suggestionsArr&&""!=o.suggestionsArr||(null!=o.apiUrl&&""!=o.apiUrl?r():console.log("Please provide suggestion array list or url")),s(),o.placeholder=l.placeholder,o.name=l.name,o["class"]=l["class"],o.type=l.type,o.required=l.required||l.ngRequired,o.selectedItemIndex=0,o.isHover=!1,o.isFocused=!1,o.onMouseEnter=function(){o.isHover=!0},o.onMouseLeave=function(){o.isHover=!1},o.onBlur=function(){if(o.isFocused=!1,console.log(o.isHover),console.log(o.ngModel),null!=o.ngModel&&""!=o.ngModel&&null!=o.suggestionsArr){var e=o.suggestionsArr.indexOf(o.ngModel);-1!=e&&o.ngModel[o.objectProperty]==o.inputValue||(o.ngModel={},o.ngModel[o.objectProperty]=o.inputValue)}else o.ngModel={},o.ngModel[o.objectProperty]=o.inputValue;console.log(o.ngModel)},o.onChange=function(){o.selectedItemIndex=0,o.isFocused=!0,null!=o.inputValue&&""!=o.inputValue||(o.isHover=!1,o.isFocused=!1)},o.keyUpParser=function(e){},o.keyDownParser=function(e){var t,l={38:"up",40:"down",8:"backspace",13:"enter",9:"tab",27:"esc"},s=l[e.keyCode];"down"==s?(t=n("filter")(o.suggestionsArr,o.inputValue),o.selectedItemIndex<t.length-1&&o.selectedItemIndex++):"up"==s&&o.selectedItemIndex>0?o.selectedItemIndex--:"enter"==s&&(t=n("filter")(o.suggestionsArr,o.inputValue),t=null==t||""==t?[]:t,o.selectedItemIndex<t.length&&o.onSuggestedItemsClick(t[o.selectedItemIndex]))},o.onSuggestedItemsClick=function(e){o.ngModel=e,s(),o.isHover=!1,o.isFocused=!1,console.log(o.ngModel)},o.mouseEnterOnItem=function(e){o.selectedItemIndex=e}}}}])}();